<!DOCTYPE html>
<html id="top">
<head>
    <meta charset="UTF-8" />
    <title>BrainTrain Academy</title>
    <link rel="stylesheet" href="styles-index.css">
</head>
<body>
    <header>
        <img src="src/logo.jpg" alt="BrainTrain logo" id="logo">
        <h1>BrainTrain Academy</h1>
        <ul>
            <li><a href="#top">Accueil</a></li>
            <li><a href="#catalogue">Catalogue</a></li>
            <li><a href="#temoignages">Témoignages</a></li>
            <li><a href="#contact">Contact</a></li>
            <li>Equipe</li>
            <li>Actualités</li>
            <li>Formulaires</li>
        </ul>
    </header>
    <main>
        <section id="accueil" class="accueil">
            <div class="hero">
                <div class="hero-content reveal">
                    <h2>Libérez le Potentiel de Votre Enfant</h2>
                    <p class="tagline">Notre Académie de Nouvelle Génération - Où la Technologie Rencontre la Créativité</p>
                    <a href="#catalogue" class="cta-button">Découvrez Nos Programmes</a>
                </div>
                <div class="hero-image reveal" style="justify-self: center;">
                    <img src="src/enfant-robotique.jpg" alt="Enfants apprenant la robotique" height="300px" width="292px">
                </div>
            </div>
        </section>

        <!-- Embedded Catalogue Section -->
        <section id="catalogue" class="catalogue-section">
            <h2>Catalogue des Formations</h2>
            <div class="iframe-container">
                <iframe src="src/catalogue.html" class="catalogue-iframe" title="Catalogue des Formations"></iframe>
            </div>
        </section>

        <!-- Embedded Témoignages Section -->
        <section id="temoignages" class="temoignages-section">
            <h2>Ce que disent nos anciens étudiants</h2>
            <h1>Découvrez les expériences et les réussites de nos anciens étudiants.</h1>
            <div class="iframe-container">
                <iframe src="src/temoignages.html" class="temoignages-iframe hidden" title="Témoignages"></iframe>
            </div>
        </section>

        <!-- Embedded Contact Section -->
        <section id="contact" class="contact-section">
            <h2>Contactez-nous</h2>
            <div class="iframe-container">
                <iframe src="src/contact.html" class="contact-iframe" title="Contact & Inscription"></iframe>
            </div>
        </section>
    </main>
    <script>
        // Ensure the page stays in the same place on refresh
        document.addEventListener('DOMContentLoaded', () => {
            if (window.location.hash) {
                const target = document.querySelector(window.location.hash);
                if (target) {
                    target.scrollIntoView({ behavior: 'instant' }); // Scroll to the target section
                }
            }

            // Check if the temoignages section is already in view on page load
            const temoignagesSection = document.querySelector('.temoignages-section');
            if (temoignagesSection.getBoundingClientRect().top < window.innerHeight) {
                const iframe = document.querySelector('.temoignages-iframe');
                iframe.classList.remove('hidden'); // Make the iframe visible
                iframe.contentWindow.postMessage('animateCards', '*'); // Trigger animation in the iframe
            }
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    
                    if (entry.target.classList.contains('mission') || 
                        entry.target.classList.contains('vision')) {
                        entry.target.style.pointerEvents = 'auto';
                    }
                }
            });
        }, {
            threshold: 0.2
        });
        
        document.querySelectorAll('.hero-content, .hero-image, .mission, .vision').forEach((el) => {
            el.style.pointerEvents = 'none';
            observer.observe(el);
        });

        // Trigger animations when the catalogue section is in view
        const catalogueObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const iframe = document.querySelector('.catalogue-iframe');
                    iframe.contentWindow.postMessage('animateCards', '*'); // Send a message to the iframe
                    
                    // Stop observing after the animation is triggered once
                    catalogueObserver.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.5 // Trigger when 50% of the catalogue section is visible
        });

        catalogueObserver.observe(document.querySelector('.catalogue-section'));



        // Trigger animations for the contact section
        const contactObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in'); // Add fade-in animation class
                    contactObserver.unobserve(entry.target); // Stop observing after animation
                }
            });
        }, {
            threshold: 0.5 // Trigger when 50% of the contact section is visible
        });

        contactObserver.observe(document.querySelector('.contact-section'));
    </script>
</body>
</html>